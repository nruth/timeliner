!!!  
%html  
  %head  
    %title= %Q(Timeliner: #{search_term}) 
    <script src="http://static.simile.mit.edu/timeline/api-2.3.0/timeline-api.js?bundle=true" type="text/javascript"></script>

  %body(onload="onLoad();" onresize="onResize();")
    %h1= %Q(Timeline for: #{search_term})
    %p= %Q(#{items_found} items found.)

    %div(id="my-timeline" style="height: 150px; border: 1px solid #aaa")
    %noscript This page uses Javascript to show you a Timeline. Please enable Javascript in your browser to see the full page. Thank you.

    = yield

    :javascript
      var tl;
      function onLoad() {
        var bandInfos = [
          Timeline.createBandInfo({
              width:          "70%", 
              intervalUnit:   Timeline.DateTime.MONTH, 
              intervalPixels: 100
          }),
          Timeline.createBandInfo({
              width:          "30%", 
              intervalUnit:   Timeline.DateTime.YEAR, 
              intervalPixels: 200
          })
        ];
        bandInfos[1].syncWith = 0;
        bandInfos[1].highlight = true;

        tl = Timeline.create(document.getElementById("my-timeline"), bandInfos);
      }
      var resizeTimerID = null;
      function onResize() {
          if (resizeTimerID == null) {
              resizeTimerID = window.setTimeout(function() {
                  resizeTimerID = null;
                  tl.layout();
              }, 500);
          }
      }